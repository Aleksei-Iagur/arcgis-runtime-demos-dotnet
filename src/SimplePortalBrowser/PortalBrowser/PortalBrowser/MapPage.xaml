<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    x:Class="PortalBrowser.MapPage"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:PortalBrowser.ViewModels;assembly=PortalBrowser"
    xmlns:esri="clr-namespace:Esri.ArcGISRuntime.Controls;assembly=Esri.ArcGISRuntime" 
    xmlns:location="clr-namespace:Esri.ArcGISRuntime.Location;assembly=Esri.ArcGISRuntime"
	Title="{Binding PortalItem.Title}">
	<ContentPage.BindingContext>
        <vm:MapVM />
    </ContentPage.BindingContext>
    
    <Grid Padding="0,-100,0,-100">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" /> 
		</Grid.RowDefinitions>
		
		<StackLayout Padding="0">
			<Label Text="{Binding PortalItem.Title}" 
				   TextColor="White"
				   FontSize="1"/>
		</StackLayout>
		
        <esri:MapView Grid.Row="1"
				  Map="{Binding WebMapVM.Map}" 
				  MinScale="{Binding WebMapVM.RecommendedMinScale}"
				  MaxScale="{Binding WebMapVM.RecommendedMaxScale}">
        </esri:MapView>

        <ActivityIndicator Color="Red" VerticalOptions="Center" HorizontalOptions="Center"
                            IsRunning="{Binding IsLoadingWebMap}" 
						   Grid.Row="1"/>
        
    </Grid>
    
</ContentPage>